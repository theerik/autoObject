<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>autoObjectWidgets.tcl</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>autoObjectWidgets.tcl</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <hr />
<p>FILENAME:    autoObjectWidgets.tcl</p>
<p>AUTHOR:      theerik@github</p>
<p>DESCRIPTION:  AutoObject is a base class used to create auto-assembling
              objects using a descriptor array.  AutoObjectWidgets defines
              a set of plugins that allow autoObjects to have an
              autogenerated GUI representation, allowing examination and
              manipulation of each field.  Widget classes are designed as
              mixin classes, allowing them to be attached to many common
              data types.</p>
<p>Common widgets provided include:</p>
<ul>
<li>autoEntry</li>
<li>autoCombobox (for enums)</li>
<li>autoLabel   (for read-only fields)</li>
<li>autoNone    (for fields that should not display in the GUI)</li>
</ul>
<h6></h6>
<p>Copyright 2015-18, Erik N. Johnson</p>
<p>This package documentation is auto-generated with
Pycco: <a href="https://pycco-docs.github.io/pycco/">https://pycco-docs.github.io/pycco/</a></p>
<p>Use "pycco filename" to re-generate HTML documentation in ./docs .</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <h6></h6>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <hr />
<h2>autoObject widget classes</h2>
<p>All widgets intended for use with AutoObject fields <em>must</em> support
the following canonical methods:</p>
<ul>
<li>createWidget</li>
</ul>
<p>All classes should be declared in the <em>::AutoObject::</em> namespace, as below.
N.B. that the widgets rely on the value of the object being in the canonical
variable <em>MyValue</em>.  If this does not hold for your class, you will need to
recreate any widgets to work with the difference.</p>
<p>The initial widgets all use the <em>validate</em> method and tie it to the
<em>validatecommand</em> option of the widget.  This allows the objects to catch
the update of the widget contents as they happen and reflect them into
the underlying object variables.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <hr />
<h3>autoEntry</h3>
<p>Default widget for common use.  Simple entry field.  Expects the value to
be stored in the canonical AutoObject name MyValue.  N.B. that if your base
class stores its data in a different place, you will need to use a different
widget.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nv">oo</span><span class="o">::</span>class create <span class="o">::</span>AutoObject::autoEntry <span class="k">{</span>

    <span class="nv">method</span> createWidget <span class="k">{</span><span class="nv">wname</span> args<span class="k">}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyValue
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> MyWidget <span class="k">[</span><span class="nv">ttk</span><span class="o">::</span>entry <span class="nv">$wname</span> <span class="err">\</span>
            <span class="nv">-textvariable</span> <span class="k">[</span><span class="nv">self</span> namespace<span class="k">]</span><span class="o">::</span>MyValue <span class="err">\</span>
            <span class="nv">-validate</span> focusout <span class="err">\</span>
            <span class="nv">-validatecommand</span> <span class="k">[</span><span class="nb">list</span> <span class="k">[</span><span class="nv">self</span><span class="k">]</span> validate<span class="k">]</span> <span class="err">\</span>
            <span class="nv">-width</span> <span class="mi">12</span> <span class="err">\</span>
            <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">]</span>
        <span class="nv">oo</span><span class="o">::</span>objdefine <span class="k">[</span><span class="nv">self</span><span class="k">]</span> forward widget <span class="nv">$MyWidget</span>
        <span class="k">if</span> <span class="k">{[</span><span class="nv">self</span> next<span class="k">]</span> <span class="nv">ne</span> <span class="k">{}}</span> <span class="k">{</span><span class="nv">next</span> <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">}</span>
        <span class="k">return</span> <span class="nv">$MyWidget</span>
    <span class="k">}</span>
    <span class="nv">method</span> validate <span class="k">{}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> curVal <span class="k">[</span><span class="nv">$MyWidget</span> <span class="nv">get</span><span class="k">]</span>
        <span class="nv">my</span> set <span class="nv">$curVal</span>
        <span class="k">return</span> true
    <span class="k">}</span>
<span class="k">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <hr />
<h3>autoCombobox</h3>
<p>Most commonly used with data that's got an enum_mix mixed in.  Basic setup
done here; note the call to "next", which calls the base class's method -
the enum_mix class populates the pick list and handles the housekeeping.
Other classes may choose to use it differently.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nv">oo</span><span class="o">::</span>class create <span class="o">::</span>AutoObject::autoCombobox <span class="k">{</span>

    <span class="nv">method</span> createWidget <span class="k">{</span><span class="nv">wname</span> args<span class="k">}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyValue
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> ns <span class="k">[</span><span class="nb">info</span> object namespace <span class="k">[</span><span class="nb">info</span> object class <span class="k">[</span><span class="nv">self</span> object<span class="k">]]]</span>
        <span class="k">upvar</span> <span class="err">$</span><span class="k">{</span><span class="nv">ns</span><span class="k">}</span><span class="o">::</span>defArray defArray
        <span class="k">set</span> MyWidget <span class="k">[</span><span class="nv">ttk</span><span class="o">::</span>combobox <span class="nv">$wname</span> <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">]</span>
        <span class="nv">$wname</span> <span class="k">set</span> <span class="nv">$MyValue</span>
        <span class="nv">oo</span><span class="o">::</span>objdefine <span class="k">[</span><span class="nv">self</span><span class="k">]</span> forward widget <span class="nv">$MyWidget</span>
        <span class="k">if</span> <span class="k">{[</span><span class="nv">self</span> next<span class="k">]</span> <span class="nv">ne</span> <span class="k">{}}</span> <span class="k">{</span><span class="nv">next</span> <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">}</span>
        <span class="k">return</span> <span class="nv">$MyWidget</span>
    <span class="k">}</span>
    <span class="nv">method</span> validate <span class="k">{}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> curVal <span class="k">[</span><span class="nv">$MyWidget</span> <span class="nv">get</span><span class="k">]</span>
        <span class="nv">my</span> set <span class="nv">$curVal</span>
        <span class="k">return</span> true
    <span class="k">}</span>
<span class="k">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <hr />
<h3>autoLabel</h3>
<p>Unmodifiable label, intended for read-only fields.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nv">oo</span><span class="o">::</span>class create <span class="o">::</span>AutoObject::autoLabel <span class="k">{</span>

    <span class="nv">method</span> createWidget <span class="k">{</span><span class="nv">wname</span> args<span class="k">}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyValue
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> MyWidget <span class="k">[</span><span class="nv">ttk</span><span class="o">::</span>label <span class="nv">$wname</span> <span class="o">-</span>textvariable <span class="err">\</span>
                      <span class="k">[</span><span class="nv">self</span> namespace<span class="k">]</span><span class="o">::</span><span class="nv">MyValue</span> <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">]</span>
        <span class="nv">oo</span><span class="o">::</span>objdefine <span class="k">[</span><span class="nv">self</span><span class="k">]</span> forward widget <span class="nv">$MyWidget</span>
        <span class="k">if</span> <span class="k">{[</span><span class="nv">self</span> next<span class="k">]</span> <span class="nv">ne</span> <span class="k">{}}</span> <span class="k">{</span><span class="nv">next</span> <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$args</span><span class="k">}</span>
        <span class="k">return</span> <span class="nv">$MyWidget</span>
    <span class="k">}</span>
<span class="k">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <hr />
<h3>autoNone</h3>
<p>Non-widget for reserved fields and other fields that for whatever reason
should not be displayed in the GUI.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nv">oo</span><span class="o">::</span>class create <span class="o">::</span>AutoObject::autoNone <span class="k">{</span>

    <span class="nv">method</span> createWidget <span class="k">{</span><span class="nv">wname</span> args<span class="k">}</span> <span class="k">{</span>
        <span class="nv">my</span> variable MyWidget
        <span class="k">set</span> MyWidget <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="nv">$MyWidget</span>
    <span class="k">}</span>
<span class="k">}</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
